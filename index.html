<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeemX Chain Staking</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'beemx-primary': '#00D4AA',
                        'beemx-secondary': '#0099FF',
                        'beemx-dark': '#0A0A0F',
                        'beemx-card': '#1A1A2E',
                        'beemx-border': '#16213E',
                        'beemx-accent': '#7B2CBF'
                    },
                    animation: {
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'float': 'float 3s ease-in-out infinite',
                        'pulse-glow': 'pulse-glow 2s ease-in-out infinite',
                        'fade-in': 'fadeIn 0.5s ease-in-out'
                    },
                    keyframes: {
                        glow: {
                            'from': { boxShadow: '0 0 10px #00D4AA' },
                            'to': { boxShadow: '0 0 20px #00D4AA, 0 0 30px rgba(0, 212, 170, 0.3)' }
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-10px)' }
                        },
                        'pulse-glow': {
                            '0%, 100%': { boxShadow: '0 0 5px #00D4AA' },
                            '50%': { boxShadow: '0 0 15px #00D4AA, 0 0 25px rgba(0, 212, 170, 0.3)' }
                        },
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .glass-card {
            background: rgba(26, 26, 46, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        .progress-bar {
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00D4AA, #0099FF);
            transition: width 0.3s ease;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #2D3748;
            transition: .4s;
            border-radius: 24px;
        }
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .toggle-slider {
            background-color: #00D4AA;
        }
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
    </style>
</head>
<body class="bg-beemx-dark text-white min-h-screen font-sans">
    <!-- Background Animation -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none z-0">
        <div class="absolute -top-40 -right-40 w-80 h-80 bg-beemx-primary rounded-full opacity-10 animate-pulse"></div>
        <div class="absolute -bottom-40 -left-40 w-80 h-80 bg-beemx-secondary rounded-full opacity-10 animate-pulse"></div>
        <div class="absolute top-1/4 left-1/4 w-40 h-40 bg-beemx-accent rounded-full opacity-10 animate-pulse"></div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed top-4 right-4 z-50 transform translate-x-full transition-transform duration-300 ease-in-out">
        <div class="glass-card border border-beemx-primary rounded-lg p-4 shadow-lg animate-fade-in">
            <div class="flex items-center space-x-2">
                <div class="w-2 h-2 bg-beemx-primary rounded-full animate-pulse"></div>
                <span id="toast-message" class="text-sm font-medium"></span>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="relative z-10 p-4 border-b border-beemx-border bg-beemx-dark/80 backdrop-blur-sm">
        <div class="flex items-center justify-between max-w-6xl mx-auto">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-gradient-to-r from-beemx-primary to-beemx-secondary rounded-full flex items-center justify-center animate-float">
                    <span class="text-xl font-bold">B</span>
                </div>
                <h1 class="text-xl font-bold bg-gradient-to-r from-beemx-primary to-beemx-secondary bg-clip-text text-transparent">
                    BeemX Chain
                </h1>
            </div>
            <button id="connectWallet" class="bg-gradient-to-r from-beemx-primary to-beemx-secondary text-black px-6 py-2 rounded-lg font-semibold hover:shadow-lg transition-all duration-300 transform hover:scale-105 active:scale-95">
                Connect Wallet
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="relative z-10 max-w-6xl mx-auto p-4">
        <!-- Hero Section -->
        <section id="heroSection" class="text-center py-12">
            <div class="animate-float mb-6">
                <div class="w-24 h-24 bg-gradient-to-r from-beemx-primary to-beemx-secondary rounded-full flex items-center justify-center mx-auto animate-glow">
                    <span class="text-4xl font-bold text-black">B</span>
                </div>
            </div>
            <h2 class="text-4xl md:text-6xl font-bold mb-4">
                <span class="bg-gradient-to-r from-beemx-primary to-beemx-secondary bg-clip-text text-transparent">
                    Premium Staking
                </span>
            </h2>
            <p class="text-xl text-gray-300 mb-8 max-w-2xl mx-auto">
                Maximize your crypto earnings with BeemX Chain's premium staking platform. 
                Flexible rewards, secure transactions, powered by Solana.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto">
                <div class="glass-card border border-beemx-border rounded-xl p-6 hover:border-beemx-primary transition-all duration-300 hover:shadow-lg">
                    <div class="text-3xl mb-3 text-beemx-primary"><i class="fas fa-lock"></i></div>
                    <h3 class="font-semibold text-lg mb-2">Secure Staking</h3>
                    <p class="text-gray-300 text-sm">Your funds are protected with industry-leading security</p>
                </div>
                <div class="glass-card border border-beemx-border rounded-xl p-6 hover:border-beemx-primary transition-all duration-300 hover:shadow-lg">
                    <div class="text-3xl mb-3 text-beemx-secondary"><i class="fas fa-bolt"></i></div>
                    <h3 class="font-semibold text-lg mb-2">Daily Rewards</h3>
                    <p class="text-gray-300 text-sm">Earn up to 0.6% daily rewards on your staked tokens</p>
                </div>
                <div class="glass-card border border-beemx-border rounded-xl p-6 hover:border-beemx-primary transition-all duration-300 hover:shadow-lg">
                    <div class="text-3xl mb-3 text-beemx-accent"><i class="fas fa-mobile-alt"></i></div>
                    <h3 class="font-semibold text-lg mb-2">Mobile First</h3>
                    <p class="text-gray-300 text-sm">Seamless experience across all devices</p>
                </div>
            </div>
        </section>

        <!-- Staking Dashboard -->
        <section id="stakingDashboard" class="hidden animate-fade-in">
            <!-- Wallet Info -->
            <div class="glass-card border border-beemx-border rounded-xl p-6 mb-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="text-lg font-semibold mb-2">Connected Wallet</h3>
                        <p id="walletAddress" class="text-sm text-gray-300 font-mono"></p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="w-3 h-3 bg-beemx-primary rounded-full animate-pulse"></div>
                        <button id="disconnectWallet" class="text-xs text-red-400 hover:text-red-300">Disconnect</button>
                    </div>
                </div>
            </div>

            <!-- Stats Cards - 2x2 Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                <div class="glass-card border border-beemx-border rounded-xl p-6 hover:shadow-lg transition-all duration-300">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="text-sm text-gray-400 mb-1">Total Staked</div>
                            <div id="totalStaked" class="text-2xl font-bold text-beemx-primary">0 BEEMX</div>
                        </div>
                        <div class="w-10 h-10 rounded-full bg-beemx-primary/10 flex items-center justify-center">
                            <i class="fas fa-coins text-beemx-primary"></i>
                        </div>
                    </div>
                </div>
                <div class="glass-card border border-beemx-border rounded-xl p-6 hover:shadow-lg transition-all duration-300">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="text-sm text-gray-400 mb-1">Total Rewards</div>
                            <div id="totalRewards" class="text-2xl font-bold text-beemx-secondary">0 BEEMX</div>
                        </div>
                        <div class="w-10 h-10 rounded-full bg-beemx-secondary/10 flex items-center justify-center">
                            <i class="fas fa-gift text-beemx-secondary"></i>
                        </div>
                    </div>
                </div>
                <div class="glass-card border border-beemx-border rounded-xl p-6 hover:shadow-lg transition-all duration-300">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="text-sm text-gray-400 mb-1">Daily Yield</div>
                            <div id="dailyYield" class="text-2xl font-bold text-green-400">0%</div>
                        </div>
                        <div class="w-10 h-10 rounded-full bg-green-400/10 flex items-center justify-center">
                            <i class="fas fa-chart-line text-green-400"></i>
                        </div>
                    </div>
                </div>
                <div class="glass-card border border-beemx-border rounded-xl p-6 hover:shadow-lg transition-all duration-300">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="text-sm text-gray-400 mb-1">SOL Balance</div>
                            <div id="solBalance" class="text-2xl font-bold text-purple-400">0 SOL</div>
                        </div>
                        <div class="w-10 h-10 rounded-full bg-purple-400/10 flex items-center justify-center">
                            <i class="fab fa-solana text-purple-400"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Rate Converter -->
            <div class="glass-card border border-beemx-border rounded-xl p-6 mb-8">
                <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <i class="fas fa-exchange-alt mr-2 text-beemx-primary"></i>
                    Live Rate Converter
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">SOL Amount</label>
                        <div class="relative">
                            <input type="number" id="solInput" class="w-full bg-beemx-dark border border-beemx-border rounded-lg px-4 py-3 focus:border-beemx-primary focus:outline-none" placeholder="0.00" step="0.01">
                            <span class="absolute right-3 top-3 text-gray-400">SOL</span>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">BEEMX Equivalent</label>
                        <div class="relative">
                            <input type="number" id="beemxOutput" class="w-full bg-beemx-dark border border-beemx-border rounded-lg px-4 py-3 focus:border-beemx-primary focus:outline-none" readonly>
                            <span class="absolute right-3 top-3 text-gray-400">BEEMX</span>
                        </div>
                    </div>
                </div>
                <div class="mt-4 text-center">
                    <span class="text-sm text-gray-400">Current Rate: </span>
                    <span class="text-beemx-primary font-semibold">1 SOL = 100 BEEMX</span>
                </div>
            </div>

            <!-- Staking Options -->
            <div class="glass-card border border-beemx-border rounded-xl p-6">
                <div class="flex border-b border-beemx-border mb-6">
                    <button id="flexibleTab" class="flex-1 py-3 px-4 text-center font-medium border-b-2 border-beemx-primary text-beemx-primary">
                        <i class="fas fa-unlock-alt mr-2"></i>Flexible Staking
                    </button>
                    <button id="lockingTab" class="flex-1 py-3 px-4 text-center font-medium border-b-2 border-transparent text-gray-400 hover:text-white">
                        <i class="fas fa-lock mr-2"></i>Locking Staking
                    </button>
                </div>

                <!-- Flexible Staking -->
                <div id="flexibleStaking" class="space-y-6">
                    <div class="glass-card rounded-xl p-6 border border-beemx-border">
                        <h4 class="text-lg font-semibold mb-4 text-beemx-primary">
                            <i class="fas fa-unlock-alt mr-2"></i>Flexible Staking - 0.1% Daily
                        </h4>
                        <p class="text-sm text-gray-300 mb-4">Stake your SOL and earn daily rewards. Unstake anytime without penalties.</p>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">SOL Amount to Stake</label>
                                <div class="relative">
                                    <input type="number" id="flexibleAmount" class="w-full bg-beemx-dark border border-beemx-border rounded-lg px-4 py-3 focus:border-beemx-primary focus:outline-none" placeholder="0.00" step="0.01">
                                    <span class="absolute right-3 top-3 text-gray-400">SOL</span>
                                </div>
                            </div>
                            <div id="flexiblePreview" class="glass-card rounded-lg p-4 hidden">
                                <div class="text-sm text-gray-400 mb-2">Staking Preview:</div>
                                <div class="flex justify-between items-center py-2 border-b border-beemx-border/30">
                                    <span class="text-gray-300">You'll receive:</span>
                                    <span id="flexibleBeemxAmount" class="text-beemx-primary font-semibold">0 BEEMX</span>
                                </div>
                                <div class="flex justify-between items-center py-2">
                                    <span class="text-gray-300">Daily rewards:</span>
                                    <span id="flexibleDailyReward" class="text-green-400 font-semibold">0 BEEMX</span>
                                </div>
                            </div>
                            <button id="stakeFlexible" class="w-full bg-gradient-to-r from-beemx-primary to-beemx-secondary text-black py-3 rounded-lg font-semibold hover:shadow-lg transition-all duration-300 transform hover:scale-105 active:scale-95">
                                <i class="fas fa-coins mr-2"></i>Stake Now
                            </button>
                        </div>
                    </div>

                    <!-- Active Flexible Stakes -->
                    <div id="activeFlexibleStakes" class="space-y-4">
                        <div class="flex justify-between items-center">
                            <h4 class="text-lg font-semibold">
                                <i class="fas fa-wallet mr-2 text-beemx-primary"></i>Your Flexible Stakes
                            </h4>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <span class="text-sm text-gray-400">Hide Zero</span>
                                <div class="toggle-switch">
                                    <input type="checkbox" id="hideFlexibleToggle">
                                    <span class="toggle-slider"></span>
                                </div>
                            </label>
                        </div>
                        <div id="flexibleStakesList" class="space-y-3">
                            <!-- Stakes will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Locking Staking -->
                <div id="lockingStaking" class="space-y-6 hidden">
                    <!-- Locking Options Grid 2x2 -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="glass-card rounded-xl p-6 border border-beemx-border hover:border-beemx-primary transition-all duration-300 cursor-pointer lock-option group" data-duration="30" data-rate="0.2">
                            <div class="flex justify-between items-start mb-3">
                                <div>
                                    <h4 class="text-lg font-semibold mb-2 text-beemx-primary group-hover:text-white">1 Month Lock</h4>
                                    <p class="text-2xl font-bold mb-2">0.2% Daily</p>
                                </div>
                                <div class="w-12 h-12 rounded-full bg-beemx-primary/10 flex items-center justify-center group-hover:bg-beemx-primary/20">
                                    <i class="fas fa-calendar-alt text-beemx-primary"></i>
                                </div>
                            </div>
                            <p class="text-sm text-gray-300 group-hover:text-gray-200">Lock for 30 days, earn higher rewards</p>
                            <div class="mt-4 text-xs text-beemx-primary font-medium">
                                <i class="fas fa-star mr-1"></i>Recommended for beginners
                            </div>
                        </div>
                        <div class="glass-card rounded-xl p-6 border border-beemx-border hover:border-beemx-primary transition-all duration-300 cursor-pointer lock-option group" data-duration="90" data-rate="0.25">
                            <div class="flex justify-between items-start mb-3">
                                <div>
                                    <h4 class="text-lg font-semibold mb-2 text-beemx-primary group-hover:text-white">3 Months Lock</h4>
                                    <p class="text-2xl font-bold mb-2">0.25% Daily</p>
                                </div>
                                <div class="w-12 h-12 rounded-full bg-beemx-primary/10 flex items-center justify-center group-hover:bg-beemx-primary/20">
                                    <i class="fas fa-calendar-check text-beemx-primary"></i>
                                </div>
                            </div>
                            <p class="text-sm text-gray-300 group-hover:text-gray-200">Lock for 90 days, better returns</p>
                            <div class="mt-4 text-xs text-beemx-primary font-medium">
                                <i class="fas fa-bolt mr-1"></i>Popular choice
                            </div>
                        </div>
                        <div class="glass-card rounded-xl p-6 border border-beemx-border hover:border-beemx-primary transition-all duration-300 cursor-pointer lock-option group" data-duration="180" data-rate="0.3">
                            <div class="flex justify-between items-start mb-3">
                                <div>
                                    <h4 class="text-lg font-semibold mb-2 text-beemx-primary group-hover:text-white">6 Months Lock</h4>
                                    <p class="text-2xl font-bold mb-2">0.3% Daily</p>
                                </div>
                                <div class="w-12 h-12 rounded-full bg-beemx-primary/10 flex items-center justify-center group-hover:bg-beemx-primary/20">
                                    <i class="fas fa-gem text-beemx-primary"></i>
                                </div>
                            </div>
                            <p class="text-sm text-gray-300 group-hover:text-gray-200">Lock for 180 days, premium rewards</p>
                            <div class="mt-4 text-xs text-beemx-primary font-medium">
                                <i class="fas fa-crown mr-1"></i>Premium tier
                            </div>
                        </div>
                        <div class="glass-card rounded-xl p-6 border border-beemx-border hover:border-beemx-primary transition-all duration-300 cursor-pointer lock-option group" data-duration="365" data-rate="0.6">
                            <div class="flex justify-between items-start mb-3">
                                <div>
                                    <h4 class="text-lg font-semibold mb-2 text-beemx-primary group-hover:text-white">1 Year Lock</h4>
                                    <p class="text-2xl font-bold mb-2">0.6% Daily</p>
                                </div>
                                <div class="w-12 h-12 rounded-full bg-beemx-primary/10 flex items-center justify-center group-hover:bg-beemx-primary/20">
                                    <i class="fas fa-trophy text-beemx-primary"></i>
                                </div>
                            </div>
                            <p class="text-sm text-gray-300 group-hover:text-gray-200">Lock for 365 days, maximum yield</p>
                            <div class="mt-4 text-xs text-beemx-primary font-medium">
                                <i class="fas fa-rocket mr-1"></i>Maximum rewards
                            </div>
                        </div>
                    </div>

                    <!-- Locking Stake Form -->
                    <div id="lockingStakeForm" class="glass-card rounded-xl p-6 border border-beemx-border hidden">
                        <h4 class="text-lg font-semibold mb-4">
                            <i class="fas fa-lock mr-2 text-beemx-primary"></i>Lock Your Stake
                        </h4>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">Selected Plan</label>
                                <div id="selectedPlan" class="glass-card rounded-lg p-3 text-beemx-primary font-semibold flex items-center">
                                    <i class="fas fa-calendar-check mr-2"></i>
                                    <span>No plan selected</span>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">SOL Amount to Lock</label>
                                <div class="relative">
                                    <input type="number" id="lockingAmount" class="w-full bg-beemx-dark border border-beemx-border rounded-lg px-4 py-3 focus:border-beemx-primary focus:outline-none" placeholder="0.00" step="0.01">
                                    <span class="absolute right-3 top-3 text-gray-400">SOL</span>
                                </div>
                            </div>
                            <div id="lockingPreview" class="glass-card rounded-lg p-4 hidden">
                                <div class="text-sm text-gray-400 mb-2">Locking Preview:</div>
                                <div class="space-y-2">
                                    <div class="flex justify-between items-center py-2 border-b border-beemx-border/30">
                                        <span class="text-gray-300">BEEMX to receive:</span>
                                        <span id="lockingBeemxAmount" class="text-beemx-primary font-semibold">0 BEEMX</span>
                                    </div>
                                    <div class="flex justify-between items-center py-2 border-b border-beemx-border/30">
                                        <span class="text-gray-300">Daily rewards:</span>
                                        <span id="lockingDailyReward" class="text-green-400 font-semibold">0 BEEMX</span>
                                    </div>
                                    <div class="flex justify-between items-center py-2">
                                        <span class="text-gray-300">Total after lock:</span>
                                        <span id="lockingTotalReward" class="text-yellow-400 font-semibold">0 BEEMX</span>
                                    </div>
                                </div>
                            </div>
                            <button id="stakeLocking" class="w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 rounded-lg font-semibold hover:shadow-lg transition-all duration-300 transform hover:scale-105 active:scale-95">
                                <i class="fas fa-lock mr-2"></i>Lock & Stake
                            </button>
                        </div>
                    </div>

                    <!-- Active Locking Stakes -->
                    <div id="activeLockingStakes" class="space-y-4">
                        <div class="flex justify-between items-center">
                            <h4 class="text-lg font-semibold">
                                <i class="fas fa-lock-open mr-2 text-beemx-primary"></i>Your Locked Stakes
                            </h4>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <span class="text-sm text-gray-400">Hide Zero</span>
                                <div class="toggle-switch">
                                    <input type="checkbox" id="hideLockingToggle">
                                    <span class="toggle-slider"></span>
                                </div>
                            </label>
                        </div>
                        <div id="lockingStakesList" class="space-y-3">
                            <!-- Stakes will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // App State
        let appState = {
            connected: false,
            walletAddress: null,
            solBalance: 5.0, // Simulated balance
            stakes: {
                flexible: [],
                locking: []
            },
            selectedLockPlan: null,
            hideZeroStakes: {
                flexible: false,
                locking: false
            }
        };

        // Constants
        const SOL_TO_BEEMX_RATE = 100;

        // DOM Elements
        const connectWalletBtn = document.getElementById('connectWallet');
        const disconnectWalletBtn = document.getElementById('disconnectWallet');
        const heroSection = document.getElementById('heroSection');
        const stakingDashboard = document.getElementById('stakingDashboard');
        const flexibleTab = document.getElementById('flexibleTab');
        const lockingTab = document.getElementById('lockingTab');
        const flexibleStaking = document.getElementById('flexibleStaking');
        const lockingStaking = document.getElementById('lockingStaking');
        const hideFlexibleToggle = document.getElementById('hideFlexibleToggle');
        const hideLockingToggle = document.getElementById('hideLockingToggle');

        // Toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            
            toastMessage.textContent = message;
            toast.classList.remove('translate-x-full');
            
            setTimeout(() => {
                toast.classList.add('translate-x-full');
            }, 3000);
        }

        // Initialize app
        function init() {
            setupEventListeners();
            updateRateConverter();
            updateRewards();
            
            // Simulate real-time updates
            setInterval(updateRewards, 1000);
        }

        // Setup event listeners
        function setupEventListeners() {
            connectWalletBtn.addEventListener('click', connectWallet);
            disconnectWalletBtn.addEventListener('click', disconnectWallet);
            
            // Tab switching
            flexibleTab.addEventListener('click', () => switchTab('flexible'));
            lockingTab.addEventListener('click', () => switchTab('locking'));
            
            // Rate converter
            document.getElementById('solInput').addEventListener('input', updateRateConverter);
            
            // Staking forms
            document.getElementById('flexibleAmount').addEventListener('input', updateFlexiblePreview);
            document.getElementById('stakeFlexible').addEventListener('click', stakeFlexible);
            
            document.getElementById('lockingAmount').addEventListener('input', updateLockingPreview);
            document.getElementById('stakeLocking').addEventListener('click', stakeLocking);
            
            // Lock plan selection
            document.querySelectorAll('.lock-option').forEach(option => {
                option.addEventListener('click', selectLockPlan);
            });
            
            // Hide zero stakes toggles
            hideFlexibleToggle.addEventListener('change', () => {
                appState.hideZeroStakes.flexible = hideFlexibleToggle.checked;
                updateDashboard();
            });
            
            hideLockingToggle.addEventListener('change', () => {
                appState.hideZeroStakes.locking = hideLockingToggle.checked;
                updateDashboard();
            });
        }

        // Connect wallet
        function connectWallet() {
            if (appState.connected) return;
            
            showToast('Connecting to Phantom Wallet...', 'info');
            
            // Simulate connection
            setTimeout(() => {
                appState.connected = true;
                appState.walletAddress = 'A7x8...9KpQ'; // Simulated address
                
                connectWalletBtn.textContent = 'Connected';
                connectWalletBtn.classList.add('bg-green-600');
                connectWalletBtn.disabled = true;
                
                document.getElementById('walletAddress').textContent = appState.walletAddress;
                document.getElementById('solBalance').textContent = `${appState.solBalance} SOL`;
                
                heroSection.classList.add('hidden');
                stakingDashboard.classList.remove('hidden');
                
                showToast('Wallet connected successfully!');
                updateDashboard();
            }, 2000);
        }

        // Disconnect wallet
        function disconnectWallet() {
            appState.connected = false;
            appState.walletAddress = null;
            
            connectWalletBtn.textContent = 'Connect Wallet';
            connectWalletBtn.classList.remove('bg-green-600');
            connectWalletBtn.disabled = false;
            
            heroSection.classList.remove('hidden');
            stakingDashboard.classList.add('hidden');
            
            showToast('Wallet disconnected');
        }

        // Switch tabs
        function switchTab(tab) {
            if (tab === 'flexible') {
                flexibleTab.classList.add('border-beemx-primary', 'text-beemx-primary');
                flexibleTab.classList.remove('border-transparent', 'text-gray-400');
                lockingTab.classList.remove('border-beemx-primary', 'text-beemx-primary');
                lockingTab.classList.add('border-transparent', 'text-gray-400');
                
                flexibleStaking.classList.remove('hidden');
                lockingStaking.classList.add('hidden');
            } else {
                lockingTab.classList.add('border-beemx-primary', 'text-beemx-primary');
                lockingTab.classList.remove('border-transparent', 'text-gray-400');
                flexibleTab.classList.remove('border-beemx-primary', 'text-beemx-primary');
                flexibleTab.classList.add('border-transparent', 'text-gray-400');
                
                lockingStaking.classList.remove('hidden');
                flexibleStaking.classList.add('hidden');
            }
        }

        // Update rate converter
        function updateRateConverter() {
            const solAmount = parseFloat(document.getElementById('solInput').value) || 0;
            const beemxAmount = solAmount * SOL_TO_BEEMX_RATE;
            document.getElementById('beemxOutput').value = beemxAmount.toFixed(2);
        }

        // Update flexible preview
        function updateFlexiblePreview() {
            const solAmount = parseFloat(document.getElementById('flexibleAmount').value) || 0;
            const beemxAmount = solAmount * SOL_TO_BEEMX_RATE;
            const dailyReward = beemxAmount * 0.001; // 0.1% daily
            
            if (solAmount > 0) {
                document.getElementById('flexiblePreview').classList.remove('hidden');
                document.getElementById('flexibleBeemxAmount').textContent = `${beemxAmount.toFixed(2)} BEEMX`;
                document.getElementById('flexibleDailyReward').textContent = `${dailyReward.toFixed(4)} BEEMX`;
            } else {
                document.getElementById('flexiblePreview').classList.add('hidden');
            }
        }

        // Stake flexible
        function stakeFlexible() {
            const solAmount = parseFloat(document.getElementById('flexibleAmount').value) || 0;
            
            if (solAmount <= 0) {
                showToast('Please enter a valid amount', 'error');
                return;
            }
            
            if (solAmount > appState.solBalance) {
                showToast('Insufficient SOL balance', 'error');
                return;
            }
            
            const beemxAmount = solAmount * SOL_TO_BEEMX_RATE;
            
            // Add to stakes
            appState.stakes.flexible.push({
                id: Date.now(),
                solAmount: solAmount,
                beemxAmount: beemxAmount,
                startDate: new Date(),
                rewards: 0,
                dailyRate: 0.001
            });
            
            // Update balance
            appState.solBalance -= solAmount;
            
            showToast(`Successfully staked ${solAmount} SOL!`);
            document.getElementById('flexibleAmount').value = '';
            document.getElementById('flexiblePreview').classList.add('hidden');
            updateDashboard();
        }

        // Select lock plan
        function selectLockPlan(event) {
            const option = event.currentTarget;
            const duration = parseInt(option.dataset.duration);
            const rate = parseFloat(option.dataset.rate);
            
            // Remove previous selection
            document.querySelectorAll('.lock-option').forEach(opt => {
                opt.classList.remove('ring-2', 'ring-beemx-primary');
            });
            
            // Add selection
            option.classList.add('ring-2', 'ring-beemx-primary');
            
            appState.selectedLockPlan = { duration, rate };
            
            const planText = option.querySelector('h4').textContent;
            document.getElementById('selectedPlan').innerHTML = `<i class="fas fa-calendar-check mr-2"></i><span>${planText} - ${rate}% Daily</span>`;
            document.getElementById('lockingStakeForm').classList.remove('hidden');
        }

        // Update locking preview
        function updateLockingPreview() {
            const solAmount = parseFloat(document.getElementById('lockingAmount').value) || 0;
            
            if (!appState.selectedLockPlan || solAmount <= 0) {
                document.getElementById('lockingPreview').classList.add('hidden');
                return;
            }
            
            const beemxAmount = solAmount * SOL_TO_BEEMX_RATE;
            const dailyReward = beemxAmount * (appState.selectedLockPlan.rate / 100);
            const totalReward = beemxAmount + (dailyReward * appState.selectedLockPlan.duration);
            
            document.getElementById('lockingPreview').classList.remove('hidden');
            document.getElementById('lockingBeemxAmount').textContent = `${beemxAmount.toFixed(2)} BEEMX`;
            document.getElementById('lockingDailyReward').textContent = `${dailyReward.toFixed(4)} BEEMX`;
            document.getElementById('lockingTotalReward').textContent = `${totalReward.toFixed(2)} BEEMX`;
        }

        // Stake locking
        function stakeLocking() {
            const solAmount = parseFloat(document.getElementById('lockingAmount').value) || 0;
            
            if (solAmount <= 0) {
                showToast('Please enter a valid amount', 'error');
                return;
            }
            
            if (solAmount > appState.solBalance) {
                showToast('Insufficient SOL balance', 'error');
                return;
            }
            
            if (!appState.selectedLockPlan) {
                showToast('Please select a lock plan', 'error');
                return;
            }
            
            const beemxAmount = solAmount * SOL_TO_BEEMX_RATE;
            const endDate = new Date();
            endDate.setDate(endDate.getDate() + appState.selectedLockPlan.duration);
            
            // Add to stakes
            appState.stakes.locking.push({
                id: Date.now(),
                solAmount: solAmount,
                beemxAmount: beemxAmount,
                startDate: new Date(),
                endDate: endDate,
                rewards: 0,
                dailyRate: appState.selectedLockPlan.rate / 100,
                duration: appState.selectedLockPlan.duration
            });
            
            // Update balance
            appState.solBalance -= solAmount;
            
            showToast(`Successfully locked ${solAmount} SOL for ${appState.selectedLockPlan.duration} days!`);
            document.getElementById('lockingAmount').value = '';
            document.getElementById('lockingPreview').classList.add('hidden');
            document.getElementById('selectedPlan').innerHTML = '<i class="fas fa-calendar-check mr-2"></i><span>No plan selected</span>';
            document.getElementById('lockingStakeForm').classList.add('hidden');
            document.querySelectorAll('.lock-option').forEach(opt => {
                opt.classList.remove('ring-2', 'ring-beemx-primary');
            });
            appState.selectedLockPlan = null;
            updateDashboard();
        }

        // Update dashboard
        function updateDashboard() {
            const totalStaked = appState.stakes.flexible.reduce((sum, stake) => sum + stake.beemxAmount, 0) +
                               appState.stakes.locking.reduce((sum, stake) => sum + stake.beemxAmount, 0);
            
            const totalRewards = appState.stakes.flexible.reduce((sum, stake) => sum + stake.rewards, 0) +
                                appState.stakes.locking.reduce((sum, stake) => sum + stake.rewards, 0);
            
            const avgDailyYield = calculateAverageDailyYield();
            
            document.getElementById('totalStaked').textContent = `${totalStaked.toFixed(2)} BEEMX`;
            document.getElementById('totalRewards').textContent = `${totalRewards.toFixed(4)} BEEMX`;
            document.getElementById('dailyYield').textContent = `${(avgDailyYield * 100).toFixed(2)}%`;
            document.getElementById('solBalance').textContent = `${appState.solBalance.toFixed(2)} SOL`;
            
            updateStakesList();
        }

        // Calculate average daily yield
        function calculateAverageDailyYield() {
            const totalStaked = appState.stakes.flexible.reduce((sum, stake) => sum + stake.beemxAmount, 0) +
                               appState.stakes.locking.reduce((sum, stake) => sum + stake.beemxAmount, 0);
            
            if (totalStaked === 0) return 0;
            
            const weightedYield = appState.stakes.flexible.reduce((sum, stake) => sum + (stake.beemxAmount * stake.dailyRate), 0) +
                                 appState.stakes.locking.reduce((sum, stake) => sum + (stake.beemxAmount * stake.dailyRate), 0);
            
            return weightedYield / totalStaked;
        }

        // Update rewards (called every second)
        function updateRewards() {
            const now = new Date();
            
            // Update flexible stakes
            appState.stakes.flexible.forEach(stake => {
                const timeDiff = (now - stake.startDate) / (1000 * 60 * 60 * 24); // Days
                const expectedRewards = stake.beemxAmount * stake.dailyRate * timeDiff;
                stake.rewards = expectedRewards;
            });
            
            // Update locking stakes
            appState.stakes.locking.forEach(stake => {
                const timeDiff = (now - stake.startDate) / (1000 * 60 * 60 * 24); // Days
                const expectedRewards = stake.beemxAmount * stake.dailyRate * timeDiff;
                stake.rewards = expectedRewards;
            });
            
            if (appState.connected) {
                updateDashboard();
            }
        }

        // Update stakes lists
        function updateStakesList() {
            updateFlexibleStakesList();
            updateLockingStakesList();
        }

        // Update flexible stakes list
        function updateFlexibleStakesList() {
            const container = document.getElementById('flexibleStakesList');
            const stakesToShow = appState.hideZeroStakes.flexible 
                ? appState.stakes.flexible.filter(stake => stake.beemxAmount > 0)
                : appState.stakes.flexible;
            
            if (stakesToShow.length === 0) {
                container.innerHTML = `
                    <div class="glass-card rounded-lg p-8 text-center border border-beemx-border">
                        <i class="fas fa-coins text-3xl text-beemx-primary mb-3"></i>
                        <p class="text-gray-400">No active flexible stakes</p>
                        <p class="text-xs text-gray-500 mt-2">Stake SOL to start earning rewards</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = stakesToShow.map(stake => {
                const daysStaked = Math.floor((new Date() - stake.startDate) / (1000 * 60 * 60 * 24));
                return `
                    <div class="glass-card rounded-lg p-4 border border-beemx-border hover:border-beemx-primary transition-all duration-300">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <div class="text-sm text-gray-400">Staked Amount</div>
                                <div class="text-lg font-semibold text-beemx-primary">${stake.beemxAmount.toFixed(2)} BEEMX</div>
                            </div>
                            <div class="text-right">
                                <div class="text-sm text-gray-400">Rewards Earned</div>
                                <div class="text-lg font-semibold text-green-400">${stake.rewards.toFixed(4)} BEEMX</div>
                            </div>
                        </div>
                        <div class="flex justify-between items-center text-sm text-gray-400 mb-3">
                            <span><i class="fas fa-percentage mr-1"></i>Daily Rate: 0.1%</span>
                            <span><i class="far fa-clock mr-1"></i>Days Staked: ${daysStaked}</span>
                        </div>
                        <div class="progress-bar bg-beemx-dark mb-3">
                            <div class="progress-fill" style="width: ${Math.min(100, (daysStaked / 30) * 100)}%"></div>
                        </div>
                        <button onclick="unstakeFlexible(${stake.id})" class="w-full bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white py-2 rounded-lg font-medium transition-all duration-300">
                            <i class="fas fa-unlock mr-2"></i>Unstake
                        </button>
                    </div>
                `;
            }).join('');
        }

        // Update locking stakes list
        function updateLockingStakesList() {
            const container = document.getElementById('lockingStakesList');
            const stakesToShow = appState.hideZeroStakes.locking 
                ? appState.stakes.locking.filter(stake => stake.beemxAmount > 0)
                : appState.stakes.locking;
            
            if (stakesToShow.length === 0) {
                container.innerHTML = `
                    <div class="glass-card rounded-lg p-8 text-center border border-beemx-border">
                        <i class="fas fa-lock-open text-3xl text-beemx-primary mb-3"></i>
                        <p class="text-gray-400">No active locked stakes</p>
                        <p class="text-xs text-gray-500 mt-2">Select a lock plan to start earning premium rewards</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = stakesToShow.map(stake => {
                const now = new Date();
                const timeLeft = stake.endDate - now;
                const daysLeft = Math.max(0, Math.ceil(timeLeft / (1000 * 60 * 60 * 24)));
                const daysPassed = stake.duration - daysLeft;
                const isExpired = timeLeft <= 0;
                const progressPercentage = Math.min(100, (daysPassed / stake.duration) * 100);
                
                return `
                    <div class="glass-card rounded-lg p-4 border border-beemx-border hover:border-beemx-primary transition-all duration-300">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <div class="text-sm text-gray-400">Locked Amount</div>
                                <div class="text-lg font-semibold text-beemx-primary">${stake.beemxAmount.toFixed(2)} BEEMX</div>
                            </div>
                            <div class="text-right">
                                <div class="text-sm text-gray-400">Rewards Earned</div>
                                <div class="text-lg font-semibold text-green-400">${stake.rewards.toFixed(4)} BEEMX</div>
                            </div>
                        </div>
                        <div class="flex justify-between items-center text-sm text-gray-400 mb-3">
                            <span><i class="fas fa-percentage mr-1"></i>Daily Rate: ${(stake.dailyRate * 100).toFixed(2)}%</span>
                            <span class="${isExpired ? 'text-green-400' : 'text-yellow-400'}">
                                <i class="fas ${isExpired ? 'fa-check-circle' : 'fa-hourglass-half'} mr-1"></i>
                                ${isExpired ? 'Ready to claim!' : `${daysLeft} days left`}
                            </span>
                        </div>
                        <div class="progress-bar bg-beemx-dark mb-3">
                            <div class="progress-fill" style="width: ${progressPercentage}%"></div>
                        </div>
                        <div class="flex justify-between text-xs text-gray-500 mb-3">
                            <span>Started: ${stake.startDate.toLocaleDateString()}</span>
                            <span>Ends: ${stake.endDate.toLocaleDateString()}</span>
                        </div>
                        <button onclick="claimLocking(${stake.id})" 
                                class="w-full py-2 rounded-lg font-medium transition-all duration-300 ${isExpired ? 'bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white' : 'bg-gray-600 text-gray-400 cursor-not-allowed'}" 
                                ${isExpired ? '' : 'disabled'}>
                            <i class="fas ${isExpired ? 'fa-gift' : 'fa-lock'} mr-2"></i>
                            ${isExpired ? 'Claim Rewards' : 'Locked'}
                        </button>
                    </div>
                `;
            }).join('');
        }

        // Unstake flexible
        function unstakeFlexible(stakeId) {
            const stakeIndex = appState.stakes.flexible.findIndex(stake => stake.id === stakeId);
            if (stakeIndex === -1) return;
            
            const stake = appState.stakes.flexible[stakeIndex];
            
            // Return SOL to balance
            appState.solBalance += stake.solAmount;
            
            // Remove from stakes
            appState.stakes.flexible.splice(stakeIndex, 1);
            
            showToast(`Successfully unstaked ${stake.solAmount} SOL! Rewards kept: ${stake.rewards.toFixed(4)} BEEMX`);
            updateDashboard();
        }

        // Claim locking rewards
        function claimLocking(stakeId) {
            const stakeIndex = appState.stakes.locking.findIndex(stake => stake.id === stakeId);
            if (stakeIndex === -1) return;
            
            const stake = appState.stakes.locking[stakeIndex];
            const now = new Date();
            
            if (now < stake.endDate) {
                showToast('Stake is still locked!', 'error');
                return;
            }
            
            // Return SOL to balance
            appState.solBalance += stake.solAmount;
            
            // Remove from stakes
            appState.stakes.locking.splice(stakeIndex, 1);
            
            showToast(`Successfully claimed ${stake.solAmount} SOL + ${stake.rewards.toFixed(4)} BEEMX rewards!`);
            updateDashboard();
        }

        // Expose functions to global scope for onclick handlers
        window.unstakeFlexible = unstakeFlexible;
        window.claimLocking = claimLocking;

        // Initialize app when page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
